<!DOCTYPE html>
<html lang="tr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suriye Mirası - Dijital Rehber</title>
    
    <!-- Tailwind CSS (Tasarım için) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts (Tüm diller için uygun fontlar) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic:wght@400;700&family=Noto+Sans:wght@400;700&family=Noto+Serif:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- FontAwesome (İkonlar için) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#b45309', // Altın/Bakır tonu (Tarihi doku için)
                        secondary: '#1f2937', // Koyu Gri
                        light: '#f3f4f6',
                        offwhite: '#fcfcfc',
                    },
                    fontFamily: {
                        sans: ['"Noto Sans"', 'sans-serif'],
                        serif: ['"Noto Serif"', 'serif'],
                        arabic: ['"Noto Naskh Arabic"', 'serif'],
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
                        'card': '0 0 0 1px rgba(0,0,0,0.03), 0 2px 8px rgba(0,0,0,0.04)',
                    }
                }
            }
        }
    </script>

    <style>
        /* RTL ve Font Ayarları */
        :root {
            --font-main: 'Noto Sans', sans-serif;
        }
        body {
            font-family: var(--font-main);
        }
        [dir="rtl"] body {
            font-family: 'Noto Naskh Arabic', serif;
        }
        /* Görsel geçiş efektleri */
        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Ses oynatıcı özelleştirme */
        audio::-webkit-media-controls-panel {
            background-color: #f3f4f6;
        }
        /* Detay metinleri için paragraf boşluğu */
        .detail-content p {
            margin-bottom: 1.25rem;
            line-height: 1.8;
        }
        /* Desenli Arka Plan */
        .pattern-bg {
            background-color: #b45309;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
    </style>
</head>
<body class="bg-offwhite text-gray-800 min-h-screen flex flex-col transition-all duration-300">

    <!-- Navbar -->
    <nav class="bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-50 border-b border-gray-100">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <!-- Logo -->
            <div class="flex items-center space-x-3 rtl:space-x-reverse cursor-pointer group" onclick="router('home')">
                <div class="bg-primary text-white p-2.5 rounded-lg shadow-md group-hover:bg-orange-700 transition duration-300">
                    <i class="fa-solid fa-landmark text-xl"></i>
                </div>
                <div>
                    <h1 class="font-bold text-xl leading-none text-gray-900 tracking-tight" id="nav-title">SURİYE MİRASI</h1>
                    <p class="text-xs text-gray-500 font-medium mt-0.5 tracking-wide" id="nav-subtitle">Dijital Rehber</p>
                </div>
            </div>

            <!-- Language Selector with Round Flags -->
            <div class="relative group">
                <button class="flex items-center space-x-2 text-sm font-bold text-gray-600 hover:text-primary transition py-2 px-3 rounded-full hover:bg-gray-50 border border-transparent hover:border-gray-100">
                    <img id="current-lang-flag" src="https://flagcdn.com/w40/tr.png" class="w-6 h-6 rounded-full object-cover border border-gray-200 shadow-sm" alt="TR">
                    <span id="current-lang-label" class="hidden md:inline">TR</span>
                    <i class="fa-solid fa-chevron-down text-xs ml-1 text-gray-400"></i>
                </button>
                <!-- Düzeltme: mt-2 (margin) yerine pt-2 (padding) kullanılarak aradaki boşluk dolduruldu -->
                <div class="absolute right-0 top-full pt-2 w-48 hidden group-hover:block rtl:right-auto rtl:left-0 z-50">
                    <div class="bg-white rounded-xl shadow-xl py-2 border border-gray-100 overflow-hidden ring-1 ring-black ring-opacity-5">
                        <button onclick="setLanguage('tr')" class="w-full text-left rtl:text-right px-4 py-2.5 text-sm hover:bg-gray-50 text-gray-700 font-medium flex items-center group/item">
                            <img src="https://flagcdn.com/w40/tr.png" class="w-5 h-5 rounded-full mr-3 border border-gray-200 shadow-sm group-hover/item:scale-110 transition"> Türkçe
                        </button>
                        <button onclick="setLanguage('en')" class="w-full text-left rtl:text-right px-4 py-2.5 text-sm hover:bg-gray-50 text-gray-700 font-medium flex items-center group/item">
                            <img src="https://flagcdn.com/w40/gb.png" class="w-5 h-5 rounded-full mr-3 border border-gray-200 shadow-sm group-hover/item:scale-110 transition"> English
                        </button>
                        <button onclick="setLanguage('ar')" class="w-full text-left rtl:text-right px-4 py-2.5 text-sm hover:bg-gray-50 text-gray-700 font-medium font-arabic flex items-center group/item">
                            <img src="https://flagcdn.com/w40/sy.png" class="w-5 h-5 rounded-full ml-3 border border-gray-200 shadow-sm group-hover/item:scale-110 transition"> العربية
                        </button>
                        <button onclick="setLanguage('fr')" class="w-full text-left rtl:text-right px-4 py-2.5 text-sm hover:bg-gray-50 text-gray-700 font-medium flex items-center group/item">
                            <img src="https://flagcdn.com/w40/fr.png" class="w-5 h-5 rounded-full mr-3 border border-gray-200 shadow-sm group-hover/item:scale-110 transition"> Français
                        </button>
                        <button onclick="setLanguage('ru')" class="w-full text-left rtl:text-right px-4 py-2.5 text-sm hover:bg-gray-50 text-gray-700 font-medium flex items-center group/item">
                            <img src="https://flagcdn.com/w40/ru.png" class="w-5 h-5 rounded-full mr-3 border border-gray-200 shadow-sm group-hover/item:scale-110 transition"> Русский
                        </button>
                        <button onclick="setLanguage('osm')" class="w-full text-left rtl:text-right px-4 py-2.5 text-sm hover:bg-gray-50 text-gray-700 font-medium font-arabic flex items-center group/item">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Ottoman_flag.svg/100px-Ottoman_flag.svg.png" class="w-5 h-5 rounded-full ml-3 border border-gray-200 shadow-sm group-hover/item:scale-110 transition"> عثمانليجه
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app" class="flex-grow container mx-auto px-4 py-8">
        <!-- İçerik buraya JavaScript ile yüklenecek -->
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 py-8 mt-auto">
        <div class="container mx-auto px-4 text-center">
             <div class="flex justify-center items-center space-x-2 mb-4 text-primary opacity-80">
                <i class="fa-solid fa-landmark text-2xl"></i>
            </div>
            <p class="text-sm text-gray-500 font-medium" id="footer-text">© 2025 Suriye Mirası Projesi. Tüm hakları saklıdır.</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA (VERİTABANI SİMÜLASYONU) ---
        // Görseller doğrudan verilen linklerden çekiliyor, yüklemeye gerek yok.
        const db = [
            {
                id: 1,
                mapUrl: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3323.511397843764!2d36.30432631506456!3d33.51161998075678!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1518e7343e745f9b%3A0x6b6f3d1430489295!2sUmayyad%20Mosque!5e0!3m2!1sen!2s!4v1625687452123!5m2!1sen!2s",
                images: [
                    "https://images.openai.com/thumbnails/url/8eWDdXicu5meUVJSUGylr5-al1xUWVCSmqJbkpRnoJdeXJJYkpmsl5yfq5-Zm5ieWmxfaAuUsXL0S7F0Tw7S9Q1Kcop0SczNMSj19rLwdjQNCy4xCXV0MnENcHP0MShIScsNDNF1CkkvVyu2NTQAAOh3I9A",
                    "https://madainproject.com/content/media/collect/umayyad_mosque_009921.jpg",
                    "https://img.piri.net/mnresize/900/-/resim/imagecrop/2020/04/13/09/47/resized_2503e-a2eb87d61.jpg",
                    "https://live.staticflickr.com/2564/4160505965_9fd2dcbe81_b.jpg"
                ],
                content: {
                    tr: {
                        name: "Şam Emevi Camii",
                        location: "Şam, Suriye",
                        desc: "Şam Emevi Camii, İslam tarihinin en eski ve en ihtişamlı mabetlerinden biridir. Şam’ın kalbinde yer alan bu büyük yapı, yalnızca bir cami değil; üç bin yıla yaklaşan kutsal mekân sürekliliğinin canlı bir şahididir. Aynı alan; Arami tapınağı, ardından Roma döneminde Jüpiter Mabedi, sonrasında Hristiyanlık döneminde Aziz Yahya (Vaftizci Yahya) Bazilikası olarak kullanılmış, nihayet Emevî Halifesi I. Velid döneminde (705–715) camiye dönüştürülmüştür.",
                        detailDesc: `
                            <p>Şam Emevi Camii, İslam tarihinin en eski ve en ihtişamlı mabetlerinden biridir. Şam’ın kalbinde yer alan bu büyük yapı, yalnızca bir cami değil; üç bin yıla yaklaşan kutsal mekân sürekliliğinin canlı bir şahididir. Aynı alan; Arami tapınağı, ardından Roma döneminde Jüpiter Mabedi, sonrasında Hristiyanlık döneminde Aziz Yahya (Vaftizci Yahya) Bazilikası olarak kullanılmış, nihayet Emevî Halifesi I. Velid döneminde (705–715) camiye dönüştürülmüştür. Bu yönüyle cami, dinler ve medeniyetler tarihinin üst üste yazıldığı eşsiz bir hafıza mekânıdır.</p>
                            <p>Emevi Camii, mimarisiyle İslam sanatında bir dönüm noktası kabul edilir. Geniş avlusu, üç minaresi, görkemli harimi ve özellikle altın zeminli mozaikleri, erken dönem İslam estetiğinin zirvesini temsil eder. Bu mozaiklerde insan figürü yer almaz; cennet tasvirini andıran nehirler, şehirler ve bahçeler resmedilmiştir. Rivayete göre bu süslemelerde Bizanslı ustalar çalışmış, böylece Doğu Roma ile İslam sanat anlayışı aynı eserde buluşmuştur.</p>
                            <p>Caminin en dikkat çekici bölümlerinden biri, Hz. Yahya’nın (a.s.) makamıdır. Hem Müslümanlar hem de Hristiyanlar için kutsal kabul edilen bu mekân, Şam Emevi Camii’ni evrensel bir ziyaret noktası hâline getirmiştir. Ayrıca cami, asırlar boyunca ilim halkalarına, hutbelere, devlet merasimlerine ve halkın günlük ibadet hayatına ev sahipliği yaparak Şam’ın sosyal ve ruhani merkezlerinden biri olmuştur.</p>
                            <p>Bugün Emevi Camii’ni ziyaret eden bir turist; taş sütunlar arasında yürürken Emevîlerden Abbasîlere, Selçuklulardan Osmanlılara uzanan uzun bir tarih yolculuğuna çıkar. Hamdolsun, onca yangın, deprem ve savaşa rağmen ayakta kalan bu mabet, Şam’ın kalbi olmaya devam etmektedir. İnşallah, bu kadim yapı uzun yıllar boyunca insanlığa ortak bir miras ve huzur mekânı olarak hizmet etmeyi sürdürür.</p>
                        `,
                        audioTitle: "Sesli Rehber: Tarihçe ve Mimari",
                    },
                    en: {
                        name: "Umayyad Mosque",
                        location: "Damascus, Syria",
                        desc: "The Umayyad Mosque is one of the oldest and holiest mosques in the Islamic world. It was built by the Umayyad Caliph Al-Walid I in 715 AD. Inside contains a shrine believed to contain the head of John the Baptist.",
                        audioTitle: "Audio Guide: History and Architecture",
                    },
                    ar: {
                        name: "الجامع الأموي",
                        location: "دمشق، سوريا",
                        desc: "يعتبر الجامع الأموي من أقدم وأقدس المساجد في العالم الإسلامي. بناه الخليفة الأموي الوليد بن عبد الملك عام 715 م. يحتوي المسجد على ضريح يُعتقد أنه يضم رأس النبي يحيى (يوحنا المعمدان).",
                        audioTitle: "الدليل الصوتي: التاريخ والعمارة",
                    },
                    fr: {
                        name: "Grande Mosquée des Omeyyades",
                        location: "Damas, Syrie",
                        desc: "La Grande Mosquée des Omeyyades est l'une des plus anciennes et des plus saintes mosquées du monde musulman. Construite par le calife Al-Walid Ier en 715 après J.-C., elle abrite un sanctuaire dédié à Jean le Baptiste.",
                        audioTitle: "Audio Guide: Histoire et Architecture",
                    },
                    ru: {
                        name: "Мечеть Омейядов",
                        location: "Дамаск, Сирия",
                        desc: "Мечеть Омейядов — одна из старейших и святейших мечетей в исламском мире. Построена халифом Валидом I в 715 году н.э. Внутри находится святыня, где, как полагают, покоится голова Иоанна Крестителя.",
                        audioTitle: "Аудиогид: История и Архитектура",
                    },
                    osm: {
                        name: "جامع اموي",
                        location: "شام شريف، سوريه",
                        desc: "جامع اموي، عالم اسلامك اك قديم و مقدس معبدلرندن بريدر. ميلادي ٧١٥ سنه‌سنده اموي خليفه‌سي اول وليد طرفندن ياپديرلمشدر. جامعك ايچنده حضرت يحيانك مبارك باشينك بولونديغنه اينانيلان بر تربه بولونمقده‌در.",
                        audioTitle: "صوتي رهبر: تاريخچه و معماري",
                    }
                }
            },
            {
                id: 2,
                mapUrl: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3255.4856086776185!2d37.16065531510255!3d36.1993419800768!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x15255866f7771775%3A0x6a05322986423984!2sAleppo%20Citadel!5e0!3m2!1sen!2s!4v1625687500000!5m2!1sen!2s",
                images: [
                    "https://upload.wikimedia.org/wikipedia/commons/5/54/Citadel_of_Aleppo.jpg",
                    "https://nawafir-tours.com/wp-content/uploads/2024/03/Citadel-of-Aleppo-02.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/Citadel_of_Aleppo.jpg/1200px-Citadel_of_Aleppo.jpg"
                ],
                content: {
                    tr: {
                        name: "Halep Kalesi",
                        location: "Halep, Suriye",
                        desc: "Halep Kalesi, Suriye’nin kuzeyinde yer alan ve binlerce yıllık geçmişiyle ayakta duran en görkemli tarihî yapılardan biridir. Halep şehrinin tam merkezinde, yapay olarak yükseltilmiş bir tepe üzerinde konumlanan kale; sadece askerî bir yapı değil, aynı zamanda medeniyetlerin üst üste biriktiği canlı bir şehir belleğidir.",
                        detailDesc: `
                            <p>Halep Kalesi, Suriye’nin kuzeyinde yer alan ve binlerce yıllık geçmişiyle ayakta duran en görkemli tarihî yapılardan biridir. Halep şehrinin tam merkezinde, yapay olarak yükseltilmiş bir tepe üzerinde konumlanan kale; sadece askerî bir yapı değil, aynı zamanda medeniyetlerin üst üste biriktiği canlı bir şehir belleğidir. Arkeolojik bulgular, bu tepenin MÖ 3. binyıla kadar uzanan bir yerleşim alanı olduğunu göstermektedir.</p>
                            
                            <p>Tarih boyunca kale; Hititler, Asurlular, Persler, Helenistik krallıklar, Romalılar ve Bizanslılar tarafından kullanılmış, ancak bugünkü görkemli siluetini özellikle İslam medeniyeti döneminde kazanmıştır. Hamdanîler, Eyyûbîler (özellikle Selahaddin Eyyûbî devri), Memlükler ve Osmanlılar kaleyi hem askerî üs hem de idari merkez olarak değerlendirmiştir. Özellikle Eyyûbîler döneminde surlar güçlendirilmiş, giriş köprüsü, saray yapıları, cami ve su sistemleri inşa edilmiştir.</p>
                            
                            <p>Halep Kalesi, yalnızca savunma amaçlı değil; içinde saraylar, hamamlar, mescitler, tahıl depoları ve yeraltı su kanalları barındıran küçük bir şehir gibidir. Bu yönüyle kale, Halep’in ticaret, kültür ve siyaset hayatının yüzyıllar boyunca kalbinin attığı yer olmuştur. Kaleden aşağı bakıldığında görülen eski Halep sokakları, çarşılar ve hanlar, bu tarihsel sürekliliğin sessiz tanıklarıdır.</p>
                            
                            <p>UNESCO Dünya Mirası Listesi’nde yer alan Halep Kalesi, ne yazık ki Suriye’deki iç savaş sırasında zarar görmüş olsa da, hâlâ ayakta duran ihtişamıyla ziyaretçilerine derin bir tarih hissi sunar. Bugün burayı gezen bir turist; taş duvarların arasında dolaşırken, geçmişin izlerini adım adım hisseder. Hamdolsun, bu kadim miras hâlâ insanlığa “medeniyetler geçer, izler kalır” gerçeğini hatırlatmaya devam etmektedir.</p>
                        `,
                        audioTitle: "Sesli Rehber: Kalenin Savunma Sistemi",
                    },
                    en: {
                        name: "Citadel of Aleppo",
                        location: "Aleppo, Syria",
                        desc: "One of the oldest and largest castles in the world, the Citadel of Aleppo rises on a natural hill in the city center. Most of the current structure dates back to the Ayyubid period (12-13th century). Famous for its walls and palace ruins.",
                        audioTitle: "Audio Guide: Defense Systems",
                    },
                    ar: {
                        name: "قلعة حلب",
                        location: "حلب، سوريا",
                        desc: "تعتبر قلعة حلب من أقدم وأكبر القلاع في العالم، وتنتصب فوق تلة طبيعية وسط المدينة. يعود معظم البناء الحالي إلى العهد الأيوبي (القرن 12-13). تشتهر القلعة بأسوارها وبقايا القصور والحمامات.",
                        audioTitle: "الدليل الصوتي: أنظمة الدفاع",
                    },
                    fr: {
                        name: "Citadelle d'Alep",
                        location: "Alep, Syrie",
                        desc: "L'une des plus anciennes et des plus grandes forteresses du monde, la Citadelle d'Alep domine la ville. La plupart de la structure actuelle date de la période ayyoubide (XIIe-XIIIe siècles).",
                        audioTitle: "Audio Guide: Le Système Défensif",
                    },
                    ru: {
                        name: "Цитадель Алеппо",
                        location: "Алеппо, Сирия",
                        desc: "Цитадель Алеппо — одна из старейших и крупнейших крепостей в мире, возвышающаяся на холме в центре города. Большая часть нынешней постройки относится к периоду Айюбидов (12-13 вв).",
                        audioTitle: "Аудиогид: Оборонительные системы",
                    },
                    osm: {
                        name: "حلب قلعه‌سي",
                        location: "حلب، سوريه",
                        desc: "دنيانك اك قديم و اك بيوك قلعه‌لرندن بري اولان حلب قلعه‌سي، شهرك مركزنده طبيعي بر تپه اوزرنده يوكسلير. موجود ياپينك چوغو ايوبي دورينه (١٢-١٣نجي يوزييل) عائددر. قلعه، سورلري و سراي بقايايي ايله مشهوردر.",
                        audioTitle: "صوتي رهبر: قلعه‌نك مدافعه سيستمي",
                    }
                }
            },
            {
                id: 3,
                mapUrl: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3255.498123456789!2d37.15654321098765!3d36.19901234567890!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1525586612345678%3A0xabcdef1234567890!2sAl-Madina%20Souq!5e0!3m2!1sen!2s!4v1625687500000!5m2!1sen!2s",
                images: [
                    "https://static.euronews.com/articles/stories/04/07/42/92/1200x675_cmsv2_6c4b4ae5-e71b-54e9-a818-88183636acae-4074292.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/Aleppo-suq-Alp.JPG/1200px-Aleppo-suq-Alp.JPG",
                    "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRtHDj5lgkHZ2hE7oAmlF-q5gBgRVsGchHRVA&s",
                    "https://previews.123rf.com/images/jackmalipan/jackmalipan1512/jackmalipan151200086/50729712-bazaar-souk-market-interior-in-aleppo-old-town-syria.jpg",
                    "https://i0.wp.com/www.thealeppoproject.com/wp-content/uploads/2017/02/IMG_2355.jpg?fit=3888%2C2592&ssl=1"
                ],
                content: {
                    tr: {
                        name: "Halep Kapalı Çarşısı",
                        location: "Halep, Suriye",
                        desc: "İslam medeniyetinin ve dünya tarihinin en köklü merkezlerinden biri olan Halep, asırlardır kesintisiz yaşamın sürdüğü müstesna bir şehirdir. Bu kadim şehrin kalbinde uzanan Halep Kapalı Çarşısı (Souq al-Madina), UNESCO Dünya Mirası listesinde yer alan devasa bir yapılar topluluğudur.",
                        detailDesc: `
                            <p>İslam medeniyetinin ve dünya tarihinin en köklü merkezlerinden biri olan Halep, asırlardır kesintisiz yaşamın sürdüğü müstesna bir şehirdir. Bu kadim şehrin kalbinde, Halep Kalesi’nin heybetli gölgesinde uzanan Halep Kapalı Çarşısı (Souq al-Madina), UNESCO Dünya Mirası listesinde yer alan ve İslam kültürünün en önemli eserleri arasında kabul edilen devasa bir yapılar topluluğudur. "Dünyanın en uzun ve en büyük kapalı pazarı" olma unvanına sahip olan bu çarşı, Halep’in tarih boyunca küresel ticaretin merkezlerinden biri olmasını sağlamıştır.</p>
                            <p>Çarşının kökleri Helenistik dönem sokak düzenine kadar uzansa da, bugünkü dokusu ağırlıklı olarak Memlük ve Osmanlı dönemlerinin mimari karakterini taşımaktadır. Tarihi İpek Yolu’nun stratejik bir kolu olan bu çarşı sistemi, Kuzey Suriye'den gelen kervanlara hizmet vererek Doğu ile Batı arasındaki ticari akışı yöneten bir merkez olmuştur. Özellikle Bab an-Nasr kapısından kaleye uzanan ana akslar, şehrin orijinal kentsel dokusunun temelini oluşturan "matrix" rotalar olarak tanımlanır ve bu yolların etrafında şekillenen ticaret ağı Halep’in ekonomik can damarıdır.</p>
                            <p>Çarşının mimari yapısı, İslam kentsel morfolojisinin en tipik ve kompakt örneklerinden birini sergiler. Tonozlu geçitlerle birbirine bağlanan dar sokaklar; sadece dükkanları değil, aynı zamanda camileri, medreseleri, hamamları ve hanları içeren bütünleşik bir sistemdir. Osmanlı döneminde inşa edilen 16. yüzyıla tarihlenen Adliye Camii, Jami’ al-Mihmandar ve 18. yüzyılda inşa edilen al-Madrasa al-’Uthmaniyya gibi abidevi yapılar, çarşının sosyal ve dini önemini pekiştiren kültürel miras unsurlarıdır.</p>
                            <p>Halep çarşılarının ihtişamı sadece ticaretle sınırlı değildir; burası aynı zamanda zengin bir üretim merkezidir. Bölgedeki meşhur sabun fabrikaları (masbana), kaysariyeler (küçük ölçekli atölyeler) ve hanlar, Halep’in tekstil ve sanayi alanındaki üstünlüğünü asırlarca korumasını sağlamıştır. Bu ticari tesislerin büyük bir kısmı vakıf müessesesi çatısı altında toplanmış olup, Masbanat az-Zanabili gibi önemli eserler asırlardır vakıf mülkiyetiyle korunarak günümüze ulaşmıştır.</p>
                            <p>Ne yazık ki, 2012-2016 yılları arasında yaşanan Halep Savaşı, bu eşsiz kültürel miras alanında ağır tahribata yol açmıştır. Özellikle Suwayqat Ali bölgesi ve Khan Qurt Bek gibi anıtsal yapılar ciddi hasar görmüş, çarşının yüzyıllardır korunan kompakt dokusu yer yer yıkıma uğramıştır. UNESCO Dünya Mirası olan bu bölgedeki han ve dükkanların önemli bir kısmı çatışmalar sırasında terkedilmiş ve bakımsız kalmıştır. Halep Kapalı Çarşısı, uğradığı yıkıma rağmen bugün dahi İslam medeniyetinin ticari dehasını ve Osmanlı döneminin estetik anlayışını yansıtan en önemli tanıklardan biridir. Bu mirası aslına uygun şekilde korumak, dünya kültürel mirasının korunması açısından vazgeçilmez bir öneme sahiptir.</p>
                        `,
                        audioTitle: "Sesli Rehber: Ticaret ve Gelenek",
                    },
                    en: {
                        name: "Al-Madina Souq",
                        location: "Aleppo, Syria",
                        desc: "One of the largest and oldest covered markets in the world. Famous for its narrow alleys, khans, and baths with a total length of 13 kilometers. It was a major trade hub on the Silk Road.",
                        audioTitle: "Audio Guide: Trade and Tradition",
                    },
                    ar: {
                        name: "سوق المدينة",
                        location: "حلب، سوريا",
                        desc: "يعد من أكبر وأقدم الأسواق المسقوفة في العالم. يشتهر بأزقته الضيقة وخاناته وحماماته التي يبلغ طولها الإجمالي 13 كيلومترًا. كان مركزًا تجاريًا هامًا على طريق الحرير.",
                        audioTitle: "الدليل الصوتي: التجارة والتقاليد",
                    },
                    fr: {
                        name: "Souk d'Alep",
                        location: "Alep, Syrie",
                        desc: "L'un des plus grands et des plus anciens marchés couverts du monde. Célèbre pour ses ruelles étroites, ses khans et ses bains, il s'étend sur 13 km. C'était un centre commercial majeur sur la route de la soie.",
                        audioTitle: "Audio Guide: Commerce et Tradition",
                    },
                    ru: {
                        name: "Рынок Аль-Мадина",
                        location: "Алеппо, Сирия",
                        desc: "Один из крупнейших и старейших крытых рынков в мире. Известен своими узкими улочками, ханами и банями общей протяженностью 13 километров. Был важным торговым центром на Шелковом пути.",
                        audioTitle: "Аудиогид: Торговля и Традиции",
                    },
                    osm: {
                        name: "حلب قپالي چارشوسي",
                        location: "حلب، سوريه",
                        desc: "دنيانك اك بيوك و اك قديم قپالي چارشولرندن بريدر. طوپلام اوزونلوغي ١٣ كيلومتره‌يي بولان طار سوقاقلري، خانلري و حماملري ايله مشهوردر. ايپك يولينك مهم بر تجارت مركزي اولمشدر.",
                        audioTitle: "صوتي رهبر: تجارت و عنعنه",
                    }
                }
            }
        ];

        // --- UI TEXT TRANSLATIONS ---
        const uiText = {
            tr: { siteName: "SURİYE MİRASI", searchPlaceholder: "Mekan, şehir veya eser arayın...", homeTitle: "Suriye'nin Kültürel Mirası", homeSubtitle: "Geçmişin izlerini, tarihi yapıları ve kültürel zenginlikleri dijital arşivimizde keşfedin.", readMore: "Detaylı İncele", back: "Geri Dön", gallery: "Galeri", location: "Konum", playAudio: "Sesli Anlatım" },
            en: { siteName: "SYRIAN HERITAGE", searchPlaceholder: "Search for places, cities or monuments...", homeTitle: "Cultural Heritage of Syria", homeSubtitle: "Discover the traces of the past, historical structures and cultural richness in our digital archive.", readMore: "Explore Detail", back: "Go Back", gallery: "Gallery", location: "Location", playAudio: "Audio Guide" },
            ar: { siteName: "التراث السوري", searchPlaceholder: "ابحث عن الأماكن أو المدن أو الآثار...", homeTitle: "التراث الثقافي السوري", homeSubtitle: "اكتشف آثار الماضي والهياكل التاريخية والثراء الثقافي في أرشيفنا الرقمي.", readMore: "اكتشف التفاصيل", back: "رجوع", gallery: "معرض الصور", location: "الموقع", playAudio: "الدليل الصوتي" },
            fr: { siteName: "PATRIMOINE SYRIEN", searchPlaceholder: "Rechercher des lieux, villes ou monuments...", homeTitle: "Patrimoine Culturel de la Syrie", homeSubtitle: "Découvrez les traces du passé, les structures historiques et la richesse culturelle dans notre archive numérique.", readMore: "Explorer en détail", back: "Retour", gallery: "Galerie", location: "Lieu", playAudio: "Guide Audio" },
            ru: { siteName: "СИРИЙСКОЕ НАСЛЕДИЕ", searchPlaceholder: "Поиск мест, городов или памятников...", homeTitle: "Культурное наследие Сирии", homeSubtitle: "Откройте для себя следы прошлого, исторические сооружения и культурное богатство в нашем цифровом архиве.", readMore: "Подробнее", back: "Назад", gallery: "Галерея", location: "Местоположение", playAudio: "Аудиогид" },
            osm: { siteName: "سوريه ميراثي", searchPlaceholder: "مكان، شهر ويا اثر آرايك...", homeTitle: "سوريه‌نك ثقافت ميراثي", homeSubtitle: "ماضينك ايزلريني، تاريخي ياپيلاري و ثقافت زنگينلكلريني ديجيتال ارشيفمزده كشف ايدك.", readMore: "تفصيلاتلي تدقيق", back: "كرو دون", gallery: "رسملر", location: "موقع", playAudio: "صوتي شرح" }
        };

        // --- STATE MANAGEMENT ---
        let currentLang = 'tr';
        let currentView = 'home';
        let currentPlaceId = null;
        
        // --- FLAGS CONFIGURATION ---
        const flags = {
            tr: "https://flagcdn.com/w40/tr.png",
            en: "https://flagcdn.com/w40/gb.png",
            ar: "https://flagcdn.com/w40/sy.png",
            fr: "https://flagcdn.com/w40/fr.png",
            ru: "https://flagcdn.com/w40/ru.png",
            osm: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Ottoman_flag.svg/100px-Ottoman_flag.svg.png"
        };

        // --- INITIALIZATION ---
        window.onload = function() {
            // URL'de ID var mı kontrol et (QR Code simülasyonu)
            const urlParams = new URLSearchParams(window.location.search);
            const idParam = urlParams.get('id');

            if (idParam) {
                renderDetail(parseInt(idParam));
            } else {
                renderHome();
            }
            updateUIText();
        };

        // --- ROUTING / NAVIGATION ---
        function router(view, id = null) {
            currentView = view;
            currentPlaceId = id;
            window.scrollTo(0, 0);

            // URL Güncelleme (GitHub Pages'de çalışır, Preview'da hata vermez)
            try {
                if (view === 'home') {
                    // Ana sayfaya dönünce URL'i temizle
                    const cleanUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
                    window.history.pushState({ path: cleanUrl }, '', cleanUrl);
                } else if (view === 'detail' && id) {
                    // Detay sayfasına girince URL'e ?id=X ekle
                    const newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?id=' + id;
                    window.history.pushState({ path: newUrl }, '', newUrl);
                }
            } catch (e) {
                // Önizleme ortamında history API kısıtlı olabilir, yoksay.
                console.log("URL güncelleme pas geçildi (Local/Preview ortamı).");
            }

            if (view === 'home') {
                renderHome();
            } else if (view === 'detail' && id) {
                renderDetail(id);
            }
        }

        // Tarayıcı Geri Butonu Desteği
        window.onpopstate = function(event) {
            const urlParams = new URLSearchParams(window.location.search);
            const idParam = urlParams.get('id');
            if (idParam) {
                renderDetail(parseInt(idParam));
            } else {
                renderHome();
            }
        };

        // --- RENDER FUNCTIONS ---
        function renderHome() {
            const app = document.getElementById('app');
            const texts = uiText[currentLang];
            const isRTL = (currentLang === 'ar' || currentLang === 'osm');

            let html = `
                <!-- Modern Portal Hero Section -->
                <div class="relative pattern-bg rounded-3xl mb-12 shadow-xl overflow-hidden fade-in mx-2 lg:mx-0">
                    <div class="absolute inset-0 bg-black/10"></div>
                    <div class="relative z-10 px-6 py-16 md:py-24 text-center">
                        <h2 class="text-3xl md:text-5xl font-bold mb-4 text-white tracking-tight drop-shadow-sm leading-tight">${texts.homeTitle}</h2>
                        <p class="text-white/90 text-lg md:text-xl max-w-2xl mx-auto mb-10 font-medium leading-relaxed">${texts.homeSubtitle}</p>
                        
                        <!-- Search Bar Container -->
                        <div class="max-w-2xl mx-auto relative group">
                            <div class="absolute inset-0 bg-white/20 blur-xl rounded-full transform group-hover:bg-white/30 transition duration-500"></div>
                            <div class="relative">
                                <input type="text" id="searchInput" onkeyup="filterPlaces()" 
                                    placeholder="${texts.searchPlaceholder}" 
                                    class="w-full py-5 px-8 rounded-full shadow-2xl text-gray-800 placeholder-gray-400 focus:ring-4 focus:ring-white/30 border-0 outline-none pl-14 rtl:pl-8 rtl:pr-14 transition-all duration-300 text-lg font-medium">
                                <i class="fa-solid fa-magnifying-glass absolute top-1/2 transform -translate-y-1/2 text-gray-400 left-6 rtl:left-auto rtl:right-6 text-xl group-hover:text-primary transition-colors"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 px-2 lg:px-0" id="placesGrid">
            `;

            db.forEach(place => {
                const content = place.content[currentLang];
                html += `
                    <div class="bg-white rounded-2xl shadow-card hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1.5 cursor-pointer group flex flex-col h-full overflow-hidden border border-gray-100/50 card-item" onclick="router('detail', ${place.id})">
                        <div class="h-60 overflow-hidden relative">
                            <img src="${place.images[0]}" 
                                 onerror="this.src='https://via.placeholder.com/800x600?text=Gorsel+Yuklenemedi'"
                                 alt="${content.name}" 
                                 class="w-full h-full object-cover group-hover:scale-105 transition duration-700 ease-in-out">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-60 group-hover:opacity-40 transition-opacity"></div>
                            <div class="absolute top-4 left-4 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full shadow-sm">
                                <span class="text-primary text-xs font-bold uppercase tracking-wider flex items-center gap-1">
                                    <i class="fa-solid fa-location-dot"></i> ${content.location}
                                </span>
                            </div>
                        </div>
                        <div class="p-6 flex flex-col flex-grow relative">
                            <h3 class="text-xl font-bold mb-3 text-gray-800 group-hover:text-primary transition-colors leading-snug">${content.name}</h3>
                            <p class="text-gray-500 text-sm line-clamp-3 mb-6 leading-relaxed flex-grow">${content.desc}</p>
                            
                            <div class="pt-4 border-t border-gray-50 flex justify-between items-center mt-auto">
                                <span class="text-xs font-semibold text-gray-400 group-hover:text-gray-600 transition">Dijital Arşiv No: #${place.id.toString().padStart(4, '0')}</span>
                                <span class="w-8 h-8 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-primary group-hover:text-white transition-colors">
                                    <i class="fa-solid ${isRTL ? 'fa-arrow-left' : 'fa-arrow-right'} text-sm"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                `;
            });

            html += `</div>`;
            app.innerHTML = html;
        }

        function renderDetail(id) {
            const place = db.find(p => p.id === id);
            if (!place) return renderHome();

            const app = document.getElementById('app');
            const texts = uiText[currentLang];
            const content = place.content[currentLang];
            const isRTL = (currentLang === 'ar' || currentLang === 'osm');

            // Detay metnini belirle: Varsa detaylı HTML (detailDesc), yoksa normal desc
            const descriptionHtml = content.detailDesc || `<p>${content.desc}</p>`;

            app.innerHTML = `
                <div class="fade-in max-w-6xl mx-auto px-2 lg:px-0">
                    <!-- Breadcrumb / Back -->
                    <div class="mb-6 flex items-center justify-between">
                         <button onclick="router('home')" class="flex items-center text-gray-500 hover:text-primary transition font-semibold bg-white px-4 py-2 rounded-lg shadow-sm border border-gray-100 hover:shadow-md">
                            <i class="fa-solid ${isRTL ? 'fa-arrow-right' : 'fa-arrow-left'} mr-2 rtl:mr-0 rtl:ml-2"></i> ${texts.back}
                        </button>
                        <div class="hidden md:block text-sm text-gray-400 font-mono">ID: #${place.id.toString().padStart(4, '0')}</div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                        
                        <!-- Left Column: Main Content (8 cols) -->
                        <div class="lg:col-span-8 space-y-8">
                             <!-- Main Hero Image -->
                            <div class="relative h-[400px] md:h-[500px] rounded-2xl overflow-hidden shadow-lg group">
                                <img src="${place.images[0]}" 
                                     onerror="this.src='https://via.placeholder.com/800x600?text=Gorsel+Yuklenemedi'"
                                     class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex items-end p-8">
                                    <div class="w-full">
                                        <div class="flex items-center text-orange-200 text-sm font-bold uppercase tracking-wider mb-2">
                                            <i class="fa-solid fa-location-dot mr-2"></i> ${content.location}
                                        </div>
                                        <h1 class="text-3xl md:text-5xl font-bold text-white mb-2 shadow-sm leading-tight">${content.name}</h1>
                                    </div>
                                </div>
                            </div>

                            <!-- Audio Player -->
                            <div class="bg-white p-5 rounded-xl shadow-card border border-gray-100 flex flex-col md:flex-row items-center gap-4">
                                <div class="bg-orange-50 w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 text-primary">
                                    <i class="fa-solid fa-headphones text-xl"></i>
                                </div>
                                <div class="flex-grow w-full md:w-auto text-center md:text-left rtl:md:text-right">
                                    <p class="text-xs text-primary font-bold uppercase tracking-wider mb-0.5 opacity-80">${texts.playAudio}</p>
                                    <h4 class="text-sm font-bold text-gray-800">${content.audioTitle}</h4>
                                </div>
                                <audio controls class="w-full md:w-64 h-10 rounded-lg">
                                    <source src="#" type="audio/mpeg">
                                    Tarayıcınız ses elementini desteklemiyor.
                                </audio>
                            </div>

                            <!-- Text Content -->
                            <div class="bg-white p-8 rounded-2xl shadow-card border border-gray-100">
                                <h3 class="text-xl font-bold text-gray-800 mb-6 border-b border-gray-100 pb-4">Hakkında</h3>
                                <div class="leading-relaxed text-lg text-gray-600 text-justify detail-content font-light">
                                    ${descriptionHtml}
                                </div>
                            </div>
                        </div>

                        <!-- Right Column: Sidebar (4 cols) -->
                        <div class="lg:col-span-4 space-y-6">
                            
                            <!-- Map Card -->
                            <div class="bg-white p-1 rounded-2xl shadow-card border border-gray-100 overflow-hidden">
                                <div class="p-4 border-b border-gray-50 flex justify-between items-center bg-gray-50/50">
                                    <h3 class="font-bold text-gray-800">${texts.location}</h3>
                                    <i class="fa-solid fa-map text-gray-400"></i>
                                </div>
                                <iframe src="${place.mapUrl}" width="100%" height="300" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                                <a href="${place.mapUrl.replace('embed', 'search')}" target="_blank" class="block text-center py-3 text-sm text-primary font-semibold hover:bg-gray-50 transition">
                                    Haritada Aç <i class="fa-solid fa-external-link-alt ml-1 text-xs"></i>
                                </a>
                            </div>

                            <!-- Multimedia / Gallery -->
                            <div class="bg-white p-5 rounded-2xl shadow-card border border-gray-100">
                                <h3 class="font-bold text-gray-800 mb-4 flex items-center">
                                    <i class="fa-regular fa-images mr-2 text-primary"></i> ${texts.gallery}
                                </h3>
                                <div class="grid grid-cols-2 gap-3">
                                    <img src="${place.images[0]}" onerror="this.src='https://via.placeholder.com/300?text=Gorsel+Yok'" class="rounded-lg h-24 w-full object-cover cursor-pointer hover:opacity-80 transition ring-2 ring-transparent hover:ring-primary/20">
                                    <img src="${place.images[1]}" onerror="this.src='https://via.placeholder.com/300?text=Gorsel+Yok'" class="rounded-lg h-24 w-full object-cover cursor-pointer hover:opacity-80 transition ring-2 ring-transparent hover:ring-primary/20">
                                    ${place.images[2] ? `<img src="${place.images[2]}" onerror="this.src='https://via.placeholder.com/300?text=Hist+3'" class="rounded-lg h-24 w-full object-cover cursor-pointer hover:opacity-80 transition ring-2 ring-transparent hover:ring-primary/20">` : ''}
                                    ${place.images[3] ? `<img src="${place.images[3]}" onerror="this.src='https://via.placeholder.com/300?text=Hist+4'" class="rounded-lg h-24 w-full object-cover cursor-pointer hover:opacity-80 transition ring-2 ring-transparent hover:ring-primary/20">` : ''}
                                </div>
                            </div>
                             <!-- Video Thumbnail -->
                             <div class="rounded-2xl overflow-hidden shadow-card relative group cursor-pointer border-2 border-white ring-1 ring-gray-100">
                                <img src="${place.images[1]}" 
                                     onerror="this.src='https://via.placeholder.com/800x600?text=Video+Yok'"
                                     class="w-full h-48 object-cover filter brightness-75 group-hover:brightness-50 transition duration-500">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <div class="w-14 h-14 bg-white/20 backdrop-blur-md border border-white/50 rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition duration-300">
                                        <i class="fa-solid fa-play text-white text-xl ml-1"></i>
                                    </div>
                                </div>
                                <div class="absolute bottom-3 left-3 text-white font-bold text-sm drop-shadow-md">Tanıtım Videosu</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- HELPER FUNCTIONS ---
        function setLanguage(lang) {
            currentLang = lang;
            
            // RTL Ayarı
            const isRTL = (lang === 'ar' || lang === 'osm');
            document.documentElement.dir = isRTL ? 'rtl' : 'ltr';
            document.documentElement.lang = lang;

            // Font Ayarı (Görsel tutarlılık için)
            if (isRTL) {
                document.body.classList.add('font-arabic');
                document.body.classList.remove('font-sans');
            } else {
                document.body.classList.add('font-sans');
                document.body.classList.remove('font-arabic');
            }
            
            // Flag Update
            const flagImg = document.getElementById('current-lang-flag');
            if(flagImg && flags[lang]) {
                flagImg.src = flags[lang];
                flagImg.alt = lang.toUpperCase();
            }

            // Sayfayı Yenile
            updateUIText();
            if (currentView === 'home') {
                renderHome();
            } else {
                renderDetail(currentPlaceId);
            }
        }

        function updateUIText() {
            const texts = uiText[currentLang];
            // Başlık mantığı güncellendi
            document.getElementById('nav-title').innerText = texts.siteName;
            document.getElementById('nav-subtitle').innerText = texts.homeSubtitle.split(" ")[0] + "...";
            document.getElementById('current-lang-label').innerText = currentLang.toUpperCase();
            
            // Footer metni de güncellenebilir
            if(currentLang === 'ar' || currentLang === 'osm') {
                document.getElementById('footer-text').innerText = "© 2025 مشروع التراث السوري. جميع الحقوق محفوظة.";
            } else {
                document.getElementById('footer-text').innerText = "© 2025 Syrian Heritage Project. All rights reserved.";
            }
        }

        function filterPlaces() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const cards = document.querySelectorAll('.card-item');
            
            cards.forEach(card => {
                const text = card.innerText.toLowerCase();
                if (text.includes(query)) {
                    card.style.display = 'flex'; // Grid yapısını bozmamak için flex
                } else {
                    card.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>